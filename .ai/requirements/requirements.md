# 需求与用例

## 业务目标
BZYAgent 面向职业院校教学场景，提供课程资产的结构化管理与 AI 文档生成能力，目标是降低教师备课与文档整理成本，提高授课计划与教案的标准化程度。

## 角色与权限
- 登录用户：可进行课程管理、文档管理、AI 生成与配置。
- 未登录用户：仅可访问登录页面。

## 核心功能需求
- 账号登录与 JWT 认证。
- 用户资料管理，支持修改用户名与密码。
- AI 配置管理，支持设置 API Key、Base URL、模型名称。
- 课程管理，包含课程创建、编辑、列表与删除。
- 课程目录维护，支持富文本或文本目录录入。
- 文档管理，支持单份文档与多份文档的存储与下载。
- 授课计划生成，支持排课参数与 AI 生成。
- 教案生成，基于授课计划与课程上下文生成结构化教案。
- AI 对话，支持流式回复与历史记录。

## 关键用例
1. 用户登录
2. 更新 AI 配置并验证可用模型
3. 创建课程并录入教材信息
4. 编辑课程目录并保存
5. 生成授课计划并下载 Word 文档
6. 生成教案并下载 Word 文档
7. 上传课程相关文件并建立文档记录
8. 查看与清除 AI 对话历史
9. 删除课程与级联文档

## 业务约束与规则
- 文件上传支持 `.docx` `.pdf` `.pptx` `.md`，且单文件大小不超过 10MB。
- 生成类接口使用 SSE 传递进度，前端需处理流式状态。
- 授课计划生成基于课程目录，课程目录为空时禁止生成。
- 教案生成依赖授课计划文档，缺失时禁止生成。
- 授课计划命名固定为 `《课程名称》授课计划`。
- 教案命名规则为 `(授课顺序+1)广东碧桂园职业学院教案（主页）-第(对应周数)周教案`。
- 教案上传必须指定 `lesson_number`，同课次上传或生成需提示覆盖。
- 文档列表需包含文件存在状态，文件缺失时前端仅提供重新生成或上传入口。
- Base URL 必须以 `http://` 或 `https://` 开头，并以 `/v1` 结尾。

## 非功能性需求
- 性能：SSE 保持长连接，文档生成期间保持进度可见。
- 可用性：后端服务不可用时前端给出明确提示。
- 可靠性：课程与文档操作应具备事务性。
- 可维护性：前后端分离，功能模块可独立扩展。
- 兼容性：前端基于现代浏览器，支持桌面端为主的教学场景。
